<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Top Scholars</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>
  <header>
    <nav>
      <div class="logo">Top Scholars</div>
      <ul id="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="courses.html">Courses</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li id="auth-links">
          <a href="login.html" id="loginLink">Login</a>
          <a href="register.html" id="registerLink">Register</a>
        </li>
        <li id="user-profile" style="display: none;">
          <a href="dashboard.html">
            <i class="fas fa-user-circle"></i> <span id="usernameDisplay"></span>
          </a>
        </li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="hero">
      <h1>Welcome to Top Scholars</h1>
      <p>Where Excellence Meets Innovation</p>
    </section>
  </main>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_STORAGE_BUCKET",
      messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    const loginLink = document.getElementById("loginLink");
    const registerLink = document.getElementById("registerLink");
    const userProfile = document.getElementById("user-profile");
    const usernameDisplay = document.getElementById("usernameDisplay");

    onAuthStateChanged(auth, async (user) => {
      if (user) {
        loginLink.style.display = "none";
        registerLink.style.display = "none";
        userProfile.style.display = "inline-block";

        const userRef = doc(db, "users", user.uid);
        const userSnap = await getDoc(userRef);
        if (userSnap.exists()) {
          const userData = userSnap.data();
          usernameDisplay.textContent = userData.name || "User";
        } else {
          usernameDisplay.textContent = "User";
        }
      } else {
        loginLink.style.display = "inline-block";
        registerLink.style.display = "inline-block";
        userProfile.style.display = "none";
      }
    });
  </script>
</body>
</html>
